 <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CS2206 - DBMS Prelim Reviewer</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body { background-color: #f8f9fa; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
        .hero-section { background: linear-gradient(135deg, #0f2027 0%, #203a43 50%, #2c5364 100%); color: white; padding: 50px 0; margin-bottom: 30px; }
        .category-header { background: #e9ecef; border-left: 6px solid #0d6efd; padding: 10px 20px; margin: 40px 0 20px; font-weight: bold; border-radius: 0 8px 8px 0; }
        .card { border: none; border-radius: 12px; transition: all 0.3s ease; border: 1px solid #dee2e6; }
        .card:hover { box-shadow: 0 5px 15px rgba(0,0,0,0.1); }
        .question-text { font-weight: 500; color: #495057; }
        .feedback { margin-top: 10px; font-weight: bold; display: none; padding: 10px; border-radius: 6px; }
        .correct { background-color: #d1e7dd; color: #0f5132; border: 1px solid #badbcc; }
        .incorrect { background-color: #f8d7da; color: #842029; border: 1px solid #f5c2c7; }
        .sticky-top-custom { position: sticky; top: 0; z-index: 1020; background: white; padding: 15px; border-bottom: 2px solid #dee2e6; box-shadow: 0 2px 10px rgba(0,0,0,0.05); }
        .submit-btn:disabled { cursor: not-allowed; opacity: 0.6; }
    </style>
</head>
<body>

<div class="hero-section text-center">
    <div class="container">
        <h1 class="display-5 fw-bold">DBMS Prelim</h1>
        <p class="lead">Complete all 80 questions to enable the submission button.</p>
    </div>
</div>

<div class="sticky-top-custom">
    <div class="container">
        <div class="d-flex justify-content-between align-items-center mb-2">
            <span id="progressText" class="fw-bold text-primary">Progress: 0 / 80</span>
            <span id="scoreText" class="fw-bold text-success"></span>
        </div>
        <div class="progress" style="height: 10px;">
            <div id="progressBar" class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar" style="width: 0%"></div>
        </div>
    </div>
</div>

<div class="container my-5">
    <div id="quiz-container" class="row g-4">
        </div>

    <div class="text-center mt-5 mb-5">
        <button id="submitBtn" class="btn btn-primary btn-lg px-5 py-3 submit-btn" onclick="checkAll()" disabled>
            Submit Final Answers
        </button>
        <p id="helperText" class="text-muted mt-2 small">Answer all questions to enable this button.</p>
    </div>
</div>

<script>
    const questions = [
        // JOINS
        { q: "A condition in a SQL statement that links two or more tables.", a: "Join" },
        { q: "Combines results from two SELECT statements into one result set.", a: "Union" },
        { q: "A join that produces every possible combination of rows.", a: "Cartesian Product" },
        { q: "The keyword used to specify the join condition.", a: "ON" },
        { q: "Join that returns all rows from the right table and matches from the left.", a: "Right Join" },
        { q: "Value returned for missing data in an outer join.", a: "NULL" },
        { q: "Opposite logic of a LEFT JOIN.", a: "Right Join" },
        { q: "Join that automatically matches columns with the same name.", a: "Natural Join" },
        { q: "A temporary shorthand name for a table.", a: "Alias" },
        { q: "A query nested inside another query.", a: "Subquery" },
        { q: "Returns only records that have matching values in both tables.", a: "Inner Join" },
        { q: "The first table listed in a LEFT JOIN clause.", a: "Left Table" },
        { q: "Shortened join clause used when column names match exactly.", a: "USING" },
        { q: "Normalization's primary goal regarding data storage.", a: "Reduce Redundancy" },
        { q: "Join that keeps all data from the first table.", a: "Left Join" },
        { q: "Mathematical product of joining 10 rows by 5 rows without conditions.", a: "50" },
        { q: "Visual representation of join logic using circles.", a: "Venn Diagram" },
        { q: "MySQL synonym for 'RIGHT JOIN'.", a: "Right Outer Join" },
        { q: "SQL operator that removes duplicates while combining sets.", a: "Union" },
        { q: "Connecting a table back to itself.", a: "Self Join" },
        
        // NORMALIZATION
        { q: "Process of organizing fields and tables to minimize redundancy.", a: "Normalization" },
        { q: "Problem where data cannot be added without other missing info.", a: "Insertion Anomaly" },
        { q: "Problem where removing data kills unintended records.", a: "Deletion Anomaly" },
        { q: "When the value of attribute A determines attribute B.", a: "Functional Dependency" },
        { q: "Normal form: No repeating groups and atomic values.", a: "1NF" },
        { q: "Full dependency exists if removing any attribute breaks it.", a: "Full Functional Dependency" },
        { q: "An attribute belonging to a candidate key.", a: "Prime Attribute" },
        { q: "Normal form: 1NF + no partial dependencies.", a: "2NF" },
        { q: "Dependency on a portion of a primary key.", a: "Partial Dependency" },
        { q: "Normal form: 2NF + no transitive dependencies.", a: "3NF" },
        { q: "Stricter form where every determinant is a candidate key.", a: "BCNF" },
        { q: "Breaking a big table into smaller pieces.", a: "Decomposition" },
        { q: "Anomaly where inconsistent data occurs after a change.", a: "Update Anomaly" },
        { q: "Values that are indivisible.", a: "Atomic" },
        { q: "A set of columns that can uniquely identify a row.", a: "Candidate Key" },
        { q: "Attribute with multiple parts like 'Address'.", a: "Composite Attribute" },
        { q: "Normal form dealing with multi-valued dependency.", a: "4NF" },
        { q: "Last name of the creator of normalization.", a: "Codd" },
        { q: "State of having logical contradictions in data.", a: "Inconsistency" },
        { q: "Dependency between two non-prime attributes.", a: "Transitive Dependency" },

        // TRANSACTIONS
        { q: "A single unit of logic and work.", a: "Transaction" },
        { q: "ACID: All or nothing property.", a: "Atomicity" },
        { q: "Managing multiple transactions at once.", a: "Concurrency Control" },
        { q: "Issue where one update is overwritten by another.", a: "Lost Update" },
        { q: "Reading data from a transaction not yet committed.", a: "Dirty Read" },
        { q: "Calculating sums while values are changing.", a: "Inconsistent Analysis" },
        { q: "Object used to restrict access to a data item.", a: "Lock" },
        { q: "Lock that allows concurrent reading.", a: "Shared Lock" },
        { q: "Lock that allows exclusive writing.", a: "Exclusive Lock" },
        { q: "Protocol with growing and shrinking phases.", a: "2PL" },
        { q: "Transactions waiting forever for each other.", a: "Deadlock" },
        { q: "Graphic tool to detect cycle dependencies.", a: "Wait-for Graph" },
        { q: "2PL phase where locks are only released.", a: "Shrinking Phase" },
        { q: "2PL phase where locks are only acquired.", a: "Growing Phase" },
        { q: "Reverting a failed transaction.", a: "Rollback" },
        { q: "Optimistic concurrency protocol.", a: "Validation" },
        { q: "ACID: Ensuring rules are followed after the work.", a: "Consistency" },
        { q: "Saving transaction changes permanently.", a: "Commit" },
        { q: "ACID: Transactions don't see each other's halfway work.", a: "Isolation" },
        { q: "ACID: Data stays saved even if power fails.", a: "Durability" },

        // VIEWS
        { q: "A virtual table based on a query.", a: "View" },
        { q: "SQL command to delete a view.", a: "DROP VIEW" },
        { q: "Algorithm: View query is inserted into calling query.", a: "MERGE" },
        { q: "Algorithm: View is computed into a real temp table.", a: "TEMPTABLE" },
        { q: "Views provide this by hiding sensitive columns.", a: "Security" },
        { q: "View that allows changing base data.", a: "Updatable View" },
        { q: "Context for permissions (SQL ________).", a: "Security" },
        { q: "Default security: creator's permissions.", a: "Definer" },
        { q: "Constraint that ensures data fits the view's WHERE clause.", a: "WITH CHECK OPTION" },
        { q: "The actual physical tables a view uses.", a: "Base Tables" },
        { q: "Cost of using views in terms of speed.", a: "Overhead" },
        { q: "A view referencing another view.", a: "Nested View" },
        { q: "Security context of the person running the view.", a: "Invoker" },
        { q: "Reason for non-updatable view (e.g. GROUP BY).", a: "Aggregation" },
        { q: "Process of syncing views across servers.", a: "Replication" },
        { q: "Command to check how a view is running.", a: "EXPLAIN" },
        { q: "Hiding complexity for the user.", a: "Abstraction" },
        { q: "Errors when logic doesn't align with base tables.", a: "Logical Errors" },
        { q: "Privilege needed to set a definer.", a: "SUPER" },
        { q: "Command to modify a view.", a: "ALTER VIEW" }
    ];

    const container = document.getElementById('quiz-container');
    const headers = ["Module 1: Joins", "Module 2: Normalization", "Module 3: Transactions", "Module 4: Views"];

    questions.forEach((item, index) => {
        if (index % 20 === 0) {
            const h = document.createElement('div');
            h.className = "col-12";
            h.innerHTML = `<h2 class="category-header">${headers[Math.floor(index/20)]}</h2>`;
            container.appendChild(h);
        }

        const col = document.createElement('div');
        col.className = "col-md-6 col-lg-4";
        col.innerHTML = `
            <div class="card h-100">
                <div class="card-body">
                    <p class="question-text small text-muted mb-1">Question ${index + 1}</p>
                    <p class="mb-3">${item.q}</p>
                    <input type="text" class="form-control quiz-input" id="q${index}" oninput="updateProgress()" placeholder="Answer here...">
                    <div class="feedback" id="f${index}"></div>
                </div>
            </div>
        `;
        container.appendChild(col);
    });

    function updateProgress() {
        const inputs = document.querySelectorAll('.quiz-input');
        let filledCount = 0;
        inputs.forEach(input => {
            if (input.value.trim() !== "") filledCount++;
        });

        const percent = (filledCount / 80) * 100;
        document.getElementById('progressBar').style.width = percent + "%";
        document.getElementById('progressText').innerText = `Progress: ${filledCount} / 80`;

        const submitBtn = document.getElementById('submitBtn');
        const helperText = document.getElementById('helperText');
        
        if (filledCount === 80) {
            submitBtn.disabled = false;
            helperText.innerText = "All set! You can now submit.";
            helperText.className = "text-success mt-2 small fw-bold";
        } else {
            submitBtn.disabled = true;
            helperText.innerText = `You still need to answer ${80 - filledCount} more.`;
            helperText.className = "text-muted mt-2 small";
        }
    }

    function checkAll() {
        let score = 0;
        questions.forEach((item, index) => {
            const input = document.getElementById(`q${index}`);
            const feedback = document.getElementById(`f${index}`);
            const userVal = input.value.trim().toLowerCase();
            const correctVal = item.a.toLowerCase();

            feedback.style.display = "block";
            if (userVal === correctVal || (userVal.length > 3 && correctVal.includes(userVal))) {
                feedback.innerText = "✓ Correct";
                feedback.className = "feedback correct";
                score++;
            } else {
                feedback.innerText = "✗ Answer: " + item.a;
                feedback.className = "feedback incorrect";
            }
        });
        document.getElementById('scoreText').innerText = `Final Score: ${score} / 80`;
        window.scrollTo(0, 0);
    }
</script>

</body>
</html>
